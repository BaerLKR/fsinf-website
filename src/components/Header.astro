---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header class="dark:bg-slate-800">
	<header class="dark:bg-slate-800">
		<script>
		  const themeToggle = document.getElementById('theme-toggle');
		  const htmlElement = document.documentElement;

		  // Check if the user has a saved theme preference
		  const savedTheme = localStorage.getItem('theme');

		  if (savedTheme) {
			if (savedTheme === 'dark') {
			  htmlElement.classList.add('dark');
			} else {
			  htmlElement.classList.remove('dark');
			}
		  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
			// Respect system preference for dark mode
			htmlElement.classList.add('dark');
		  } else {
			// Default to dark mode if no preference
			htmlElement.classList.add('dark');
		  }

		  if (themeToggle) {
			themeToggle.addEventListener('click', () => {
			  if (htmlElement.classList.contains('dark')) {
				htmlElement.classList.remove('dark');
				localStorage.setItem('theme', 'light');
			  } else {
				htmlElement.classList.add('dark');
				localStorage.setItem('theme', 'dark');
			  }
			});
		  } else {
			console.warn('Theme toggle button not found.');
		  }
		</script>
	  </header>

	<nav class="dark:text-white">
		<h2 class="font-bold dark:text-white"><a href="/">{SITE_TITLE}</a></h2	>
		<div class="internal-links dark:text-cyan-200">
			<HeaderLink href="/blog">Wiki</HeaderLink>
			<HeaderLink href="/calender">Kalender</HeaderLink>
			<HeaderLink href="/mitglieder">Mitglieder</HeaderLink>
			<HeaderLink href="/contact">Kontakt</HeaderLink>
			<button
			id="theme-toggle"
			class="dark:bg-gray-800 text-gray-800 dark:text-gray-200 p-2 rounded-full focus:outline-none"
			aria-label="Toggle Dark Mode">
			ðŸŒ“
		  </button>
		</div>
		<div class="social-links">
			<a href="https://t.me/fsinfLeipzig" target="_blank">
				<span class="sr-only">Telegram</span>
				<img src="/assets/telegram.svg" alt="Telegram" width="32" height="32" aria-hidden="true">
			  </a>
			  <a href="https://www.instagram.com/fsinf_leipzig/" target="_blank">
				<span class="sr-only">Fsinf Insta</span>
				<img src="/assets/insta.svg" alt="Instagram" width="32" height="32" aria-hidden="true">
			  </a>
			  <a href="https://discord.com/invite/kprYzcKpvk" target="_blank">
				<span class="sr-only">Fsinf Discord</span>
				<img src="/assets/discord.svg" alt="Discord" width="32" height="32" aria-hidden="true">
			  </a>
			  <a href="https://git.fsinf.informatik.uni-leipzig.de/" target="_blank">
				<span class="sr-only">Fsinf GitLab repo</span>
				<img src="/assets/gitlab.svg" alt="GitLab" width="32" height="32" aria-hidden="true">
			 </a>
		</div>
	</nav>
</header>
<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: white;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
	}
	h2 {
		margin: 0;
		font-size: 1em;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}
	nav a {
		padding: 1em 0.5em;
		color: var(--black);
		border-bottom: 4px solid transparent;
		text-decoration: none;
	}
	nav a.active {
		text-decoration: none;
		border-bottom-color: var(--accent);
	}
	.social-links,
	.social-links a {
		display: flex;
	}
	@media (max-width: 720px) {
		.social-links {
			display: none;
		}
	}
</style>
